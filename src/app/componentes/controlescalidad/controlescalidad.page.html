<!--
<ion-header>
  <ion-toolbar>
    <ion-title>
      Nuevo QC 
    </ion-title>
  </ion-toolbar>
</ion-header>
-->

<ion-content padding>

  <form 
    [formGroup]="control" 
    (ngSubmit)="guardarMuestra()">

    <ion-item>
      <ion-label position="stacked">
          Código QR
      </ion-label>
      <ion-input
        disabled="true"
        placeholder="Codigo QR"
        formControlName="muestra_qr">
      </ion-input>
    </ion-item>

    <ion-item>
      <ion-label 
        position="stacked">
          Fecha Jornada
      </ion-label>
      <ion-datetime 
        displayFormat="MM/DD/YYYY" 
        formControlName="fecha_jornada">
      </ion-datetime>
    </ion-item>


    <ion-item>
      <ion-label 
        position="stacked">
          Región
      </ion-label>
      <ion-select
        okText="OK" 
        cancelText="Cancelar"
        placeholder="Región"
        formControlName="region_id">
        <ion-select-option 
          *ngFor="let region of regiones" 
          [value]="region.region_id">
          {{ region.region_nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>

      

    <ion-item>
      <ion-label 
        position="stacked">
          Productor
      </ion-label>
      <ion-select
        okText="OK" 
        cancelText="Cancelar"
        placeholder="Productor"
        formControlName="productor_id">
        <ion-select-option 
          *ngFor="let productor of productores" 
          [value]="productor.productor_id">
          {{ productor.productor_nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>





    <ion-item>
      <ion-label 
        position="stacked">
          Especie
      </ion-label>
      <ion-select
        okText="OK" 
        cancelText="Cancelar"
        placeholder="Especie"
        formControlName="especie_id">
        <ion-select-option 
          *ngFor="let especie of especies" 
          [value]="especie.especie_id">
          {{ especie.especie_nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>



    <ion-item>
      <ion-label 
        position="stacked">
          Variedad
      </ion-label>
      <ion-select
        okText="OK" 
        cancelText="Cancelar"
        placeholder="Variedad"
        formControlName="variedad_id">
        <ion-select-option 
          *ngFor="let variedad of variedades" 
          [value]="variedad.variedad_id">
          {{ variedad.variedad_nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>




    <ion-item>
      <ion-label 
        position="stacked">
          Calibre
          {{controlJson.calibre_id}}
      </ion-label>
      <ion-select
        okText="OK" 
        cancelText="Cancelar"
        placeholder="Calibre"
        [(ngModel)]="controlJson.calibre_id"
        formControlName="calibre_id">
        <ion-select-option 
          [attr.selected]="(calibre.calibre_id==controlJson.calibre_id)?'true':''"
          *ngFor="let calibre of calibres" 
          [value]="calibre.calibre_id">
          {{ calibre.calibre_nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>



    <ion-list>
      <ion-radio-group 
        formControlName="categoria_id">
        <ion-list-header>
          Categoria
        </ion-list-header>
        <ion-item *ngFor="let categoria of categorias">
          <ion-label>{{ categoria.categoria_nombre }}</ion-label>
          <ion-radio [value]="categoria.categoria_id"></ion-radio>
        </ion-item>
      </ion-radio-group>
    </ion-list>
    
    <!--
    <ion-item>
      <ion-label position="stacked">Categoría</ion-label>
      <ion-select
        okText="OK" cancelText="Cancelar"
        placeholder="Categoría"
        [(ngModel)]="control.categoria_id"
        [ngModelOptions]="{standalone: true}">
        <ion-select-option 
          *ngFor="let categoria of categorias" 
          [value]="categoria.categoria_id">
          {{ categoria.categoria_nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>
    -->





    <ion-item>
      <ion-label 
        position="stacked">
          Embalaje
      </ion-label>
      <ion-select
        okText="OK" 
        cancelText="Cancelar"
        placeholder="Embalaje"
        formControlName="embalaje_id">
        <ion-select-option 
          selected
          *ngFor="let embalaje of embalajes" 
          [value]="embalaje.embalaje_id">
          {{ embalaje.embalaje_nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>




  

    <ion-item>
      <ion-label 
        position="stacked">
          Etiqueta
      </ion-label>
      <ion-select
        okText="OK" 
        cancelText="Cancelar"
        placeholder="Etiqueta"
        formControlName="etiqueta_id">
        <ion-select-option 
          *ngFor="let etiqueta of etiquetas" 
          [value]="etiqueta.etiqueta_id">
          {{ etiqueta.etiqueta_nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>



  
  

    <ion-item>
      <ion-label 
        position="stacked">
          Peso
      </ion-label>
      <ion-input
        type="select" 
        placeholder="Peso"
        formControlName="muestra_peso">
      </ion-input>
    </ion-item>

    <ion-item>
      <ion-label 
        position="stacked">
          Bolsas
      </ion-label>
      <ion-input
        type="select" 
        placeholder="Bolsas"
        formControlName="muestra_bolsas">
      </ion-input>
    </ion-item>

    <ion-item>
      <ion-label 
        position="stacked">
          Racimos
      </ion-label>
      <ion-input
        type="select" 
        placeholder="Racimos"
        formControlName="muestra_racimos">
      </ion-input>
    </ion-item>


    <!--
    <ion-item>
      <ion-label position="stacked">Apariencia</ion-label>

      <ion-select
        okText="OK" cancelText="Cancelar"
        placeholder="Apariencia"
        [(ngModel)]="control.apariencia_id"
        [ngModelOptions]="{standalone: true}">

        <ion-select-option 
          *ngFor="let apariencia of apariencias" 
          [value]="apariencia.apariencia_id">
          {{ apariencia.apariencia_nombre }}
        </ion-select-option>
      </ion-select>

    </ion-item>
    -->

    <ion-list>
      <ion-radio-group 
        formControlName="apariencia_id">
        <ion-list-header>
          Apariencia
        </ion-list-header>
        <ion-item *ngFor="let apariencia of apariencias">
          <ion-label>{{ apariencia.apariencia_nombre }}</ion-label>
          <ion-radio [value]="apariencia.apariencia_id"></ion-radio>
        </ion-item>
      </ion-radio-group>
    </ion-list>


    <ion-button 
      fill="solid" 
      expand="block" 
      color="primary" 
      type="submit" 
      [disabled]="!control.valid">
      Guardar y Continuar
    </ion-button>


  </form>

</ion-content>


<ion-footer padding>
  <ion-button fill="solid" expand="block" color="light" (click)="irHome()">
    Volver
  </ion-button>
</ion-footer>